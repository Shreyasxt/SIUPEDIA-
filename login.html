<!DOCTYPE html>
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="author" content="MonthlyHavens">
      <link rel="shortcut icon" href="favicon.png">
      <meta name="description" content="Monthly Havens - Furniture Rental Website" />
      <meta name="keywords" content="furniture, rental, monthly havens" />
      <title>Login - MonthlyHavens</title>
      <link href="css/bootstrap.min.css" rel="stylesheet">
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
      <link href="css/tiny-slider.css" rel="stylesheet">
      <link href="css/style.css" rel="stylesheet">
      <link href="login.css" rel="stylesheet">
   </head>
   <body>
        <!-- Start Header/Navigation -->
        <nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar">
            <div class="container">
                <a class="navbar-brand" href="index.html">MonthlyHavens</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarsFurni">
                    <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li><a class="nav-link" href="shop.html">Shop</a></li>
                        <li><a class="nav-link" href="about.html">About us</a></li>
                        <li><a class="nav-link" href="services.html">Services</a></li>
                        <li><a class="nav-link" href="blog.html">Blog</a></li>
                        <li><a class="nav-link" href="contact.html">Contact us</a></li>
                    </ul>
                    <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
                        <li><a class="nav-link active" href="login.html"><img src="images/user.svg"></a></li>
                        <li><a class="nav-link" href="cart.html"><img src="images/cart.svg"></a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- End Header/Navigation -->

        <div class="wrapper">
            <div class="title-text">
              <div class="title login">Login Form</div>
              <div class="title signup">Signup Form</div>
            </div>
            <div class="form-container">
              <div class="slide-controls">
                <input type="radio" name="slide" id="login" checked>
                <input type="radio" name="slide" id="signup">
                <label for="login" class="slide login">Login</label>
                <label for="signup" class="slide signup">Signup</label>
                <div class="slider-tab"></div>
              </div>
              <div class="form-inner">
                <!-- login form -->
                <form id="loginForm" class="login">
                  <div class="field">
                    <input type="email" name="email" placeholder="Email Address" required>
                  </div>
                  <div class="field">
                    <input type="password" name="password" placeholder="Password" required>
                  </div>
                  <div class="pass-link"><a href="#">Forgot password?</a></div>
                  <div class="field btn">
                    <div class="btn-layer"></div>
                    <input type="submit" value="Login">
                  </div>
                  <div class="signup-link">Not a member? <a href="">Signup now</a></div>
                </form>

                <!-- signup form -->
                <form id="signupForm" class="signup">
                  <div class="field">
                    <input type="email" name="email" placeholder="Email Address" required>
                  </div>
                  <div class="field">
                    <input type="password" name="password" id="password" placeholder="Password" required>
                  </div>
                  <div class="field">
                    <input type="password" id="confirmPassword" placeholder="Confirm password" required>
                    <p id="passwordError" class="error-text"></p>
                  </div>
                  <div class="field btn">
                    <div class="btn-layer"></div>
                    <input type="submit" value="Signup">
                  </div>
                </form>
              </div>
            </div>
        </div>

        <!-- Start Footer Section -->
        <footer class="footer-section">
            <!-- ... (keep existing footer code) ... -->
        </footer>
        <!-- End Footer Section -->

        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/tiny-slider.js"></script>
        <script src="js/custom.js"></script>
        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const loginForm = document.getElementById('loginForm');
                const signupForm = document.getElementById('signupForm');
                const password = document.getElementById('password');
                const confirmPassword = document.getElementById('confirmPassword');
                const passwordError = document.getElementById('passwordError');

                // Password validation
                function validatePasswords() {
                    if (password.value !== confirmPassword.value) {
                        passwordError.textContent = 'Passwords do not match';
                        passwordError.style.color = 'red';
                        return false;
                    }
                    passwordError.textContent = 'Passwords match';
                    passwordError.style.color = 'green';
                    return true;
                }

                confirmPassword.addEventListener('input', validatePasswords);

                // Login form submission
                loginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    try {
                        const response = await fetch('/api/auth/login', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                email: loginForm.email.value,
                                password: loginForm.password.value
                            })
                        });

                        const data = await response.json();
                        if (response.ok) {
                            alert('Login successful!');
                            window.location.href = '/';
                        } else {
                            alert(data.message || 'Login failed');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert('An error occurred. Please try again.');
                    }
                });

                // Signup form submission
                signupForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    if (!validatePasswords()) {
                        return;
                    }

                    try {
                        const response = await fetch('/api/auth/signup', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                email: signupForm.email.value,
                                password: signupForm.password.value
                            })
                        });

                        const data = await response.json();
                        if (response.ok) {
                            alert('Signup successful! Please login.');
                            window.location.reload();
                        } else {
                            alert(data.message || 'Signup failed');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert('An error occurred. Please try again.');
                    }
                });
            });
        </script>
   </body>
</html> 